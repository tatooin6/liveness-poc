<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FacePlugin Liveness Demo</title>
   <link rel="stylesheet" href="./styles/main.css">
</head>
<body>
  <main class="demo-container">
    <h1>Face Verification (Demo)</h1>
    <p>
      This PoC hosts a set of vertical slices (document intake, liveness, comparison, inset tooling) built on top of
      <strong>faceplugin-face-recognition-js</strong>.
    </p>

    <section class="panel">
      <header>
        <h2>Live Liveness Detection</h2>
        <p>Start the camera, run models on a cadence, and visualize bounding boxes in real time.</p>
      </header>
      <div class="controls">
        <div class="control-buttons">
          <button id="start-liveness" onclick="startLivenessFromButton(event)">Start Liveness Detection</button>
          <button id="log-test" onclick="logTestClick()">Log</button>
        </div>
        <div id="live-status" class="status">Click start to begin. Click log to test.</div>
      </div>
      <div class="grid">
        <section>
          <h3>Camera Feed</h3>
          <video id="live-video" autoplay muted playsinline></video>
        </section>
        <section>
          <h3>Processed Frame</h3>
          <canvas id="live-canvas"></canvas>
        </section>
      </div>
      <p class="tip">Tip: keep your face within ~1m of the webcam and use even lighting.</p>
    </section>

    <section class="panel">
      <header>
        <h2>Document Intake & Face Comparison</h2>
        <p>Upload ID images, detect document faces, then compare them with a live capture.</p>
      </header>
      <label class="upload-control">
        <span>Select document image</span>
        <input type="file" id="document-upload" accept="image/*">
      </label>
      <div id="document-status" class="status muted">No document uploaded yet.</div>
      <div class="document-actions">
        <button id="document-analyze" type="button" disabled>Analyze Document</button>
      </div>
      <div class="document-preview">
        <img id="document-preview" alt="Document preview will render here">
        <canvas id="document-canvas" class="sr-only"></canvas>
      </div>
      <div class="face-comparison">
        <h3>Face Comparison</h3>
        <p>Upload a reference face from the document and compare it against the live feed.</p>
        <div class="comparison-controls">
          <label class="upload-control">
            <span>Upload reference face</span>
            <input type="file" id="reference-face-upload" accept="image/*">
          </label>
          <button id="compare-live-face" type="button">Compare against live capture</button>
        </div>
        <div id="comparison-status" class="status muted">Waiting for reference image.</div>
      </div>
    </section>
  </main>

  <script src="../node_modules/faceplugin-face-recognition-js/dist/facerecognition-sdk.js"></script>
  <script type="module" src="./scripts/basic-liveness.js"></script>
</body>
</html>
